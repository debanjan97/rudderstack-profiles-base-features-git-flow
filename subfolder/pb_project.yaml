name: product
schema_version: 72
connection: test
model_folders:
  - models/profiles
  - models/inputs/common
  # - models/inputs/dev
  - models/inputs/prod
entities:
  - name: user
    id_stitcher: models/user_id_stitcher
    id_types:
      - email
      - user_id
      - anon_id
    feature_views:
      using_ids:
        - id: email
          name: user_email_fv
        - id: user_id
          name: user_id_fv
  - name: workspace
    id_stitcher: models/workspace_id_graph
    id_types:
      - workspace_id
      - workspace_name
      - destination_id
      - source_id
      # - transformation_id
      # - audience_id
    feature_views:
      using_ids:
        - id: workspace_name
          name: workspace_name_fv
  - name: organization
    id_stitcher: models/organization_id_graph
    id_types:
      - org_id
      - org_name
      - salesforce_id
      - slack_channel_name
      - workspace_id
    feature_views:
      using_ids:
        - id: org_name
          name: org_name_fv
        - id: org_id
          name: org_id_fv
  - name: source_type
    default_id_stitcher:
      materialization:
        run_type: incremental
        enable_status: good_to_have
    id_types:
      - source_defn_id
      - source_defn_name
      - source_id
    feature_views:
      using_ids:
        - id: source_defn_name
          name: source_defn_name_fv
  - name: destination_type
    default_id_stitcher:
      materialization:
        run_type: incremental
        enable_status: good_to_have
    id_types:
      - destination_defn_id
      - destination_defn_name
      - destination_id
    feature_views:
      using_ids:
        - id: destination_defn_name
          name: destination_defn_name_fv
  - name: source
    default_id_stitcher:
      materialization:
        run_type: incremental
        enable_status: good_to_have
    id_types:
      - source_id
  - name: destination
    default_id_stitcher:
      materialization:
        run_type: incremental
        enable_status: good_to_have
    id_types:
      - destination_id
      
id_types:
  - name: workspace_id
  - name: workspace_name
    filters:
      - type: exclude
        regex: "rudderstack.*"
      - type: exclude
        regex: "rudderlabs.*"
  - name: source_id
  - name: destination_id
  # - name: transformation_id
  # - name: audience_id
  - name: source_defn_id
  - name: source_defn_name
  - name: destination_defn_id
  - name: destination_defn_name
  - name: org_id
  - name: org_name
  - name: salesforce_id
  - name: slack_channel_name
  - name: user_id
  - name: anon_id
    filters:
      - type: exclude
        value: ""
      - type: exclude
        value: "unknown"
      - type: exclude
        value: "NaN"
  - name: email
    filters:
      - type: include
        regex: ".+@.+"
      - type: exclude
        value: "test@company.com"
      - type: exclude
        regex: ".*@rudderstack.com"
      - type: exclude
        regex: ".*@rudderlabs.com"
